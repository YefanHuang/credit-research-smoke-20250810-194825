# API Token上限计算器

基于$0.5 USD预算，计算Perplexity和千问API的Token使用上限。

## API定价信息

### Perplexity API
- **Sonar Pro**: $3/M input, $15/M output
- **Sonar**: $1/M input, $1/M output

### 千问API
- **qwen-plus**: $0.4/M input, $1.2/M output
- **qwen-turbo**: $0.05/M input, $0.2/M output  
- **qwen-max**: $1.6/M input, $6.4/M output

## $0.5 USD预算下的Token上限计算

### Perplexity API ($0.5预算)

#### Sonar Pro模型
- 纯输入Token: $0.5 ÷ $3 × 1,000,000 = **166,667 tokens**
- 纯输出Token: $0.5 ÷ $15 × 1,000,000 = **33,333 tokens**
- 混合使用 (50%输入+50%输出): 
  - 设输入tokens为x，输出tokens也为x
  - (x × $3 + x × $15) ÷ 1,000,000 = $0.5
  - x × $18 ÷ 1,000,000 = $0.5
  - x = **27,778 tokens** (输入+输出各27,778)

#### Sonar模型  
- 纯输入Token: $0.5 ÷ $1 × 1,000,000 = **500,000 tokens**
- 纯输出Token: $0.5 ÷ $1 × 1,000,000 = **500,000 tokens**
- 混合使用 (50%输入+50%输出): **250,000 tokens** (输入+输出各250,000)

### 千问API ($0.5预算)

#### qwen-plus模型
- 纯输入Token: $0.5 ÷ $0.4 × 1,000,000 = **1,250,000 tokens**
- 纯输出Token: $0.5 ÷ $1.2 × 1,000,000 = **416,667 tokens**
- 混合使用 (50%输入+50%输出):
  - (x × $0.4 + x × $1.2) ÷ 1,000,000 = $0.5
  - x × $1.6 ÷ 1,000,000 = $0.5
  - x = **312,500 tokens** (输入+输出各312,500)

#### qwen-turbo模型
- 纯输入Token: $0.5 ÷ $0.05 × 1,000,000 = **10,000,000 tokens**
- 纯输出Token: $0.5 ÷ $0.2 × 1,000,000 = **2,500,000 tokens**  
- 混合使用 (50%输入+50%输出):
  - (x × $0.05 + x × $0.2) ÷ 1,000,000 = $0.5
  - x × $0.25 ÷ 1,000,000 = $0.5
  - x = **2,000,000 tokens** (输入+输出各2,000,000)

#### qwen-max模型
- 纯输入Token: $0.5 ÷ $1.6 × 1,000,000 = **312,500 tokens**
- 纯输出Token: $0.5 ÷ $6.4 × 1,000,000 = **78,125 tokens**
- 混合使用 (50%输入+50%输出):
  - (x × $1.6 + x × $6.4) ÷ 1,000,000 = $0.5
  - x × $8 ÷ 1,000,000 = $0.5
  - x = **62,500 tokens** (输入+输出各62,500)

## 推荐的默认Token上限 (基于混合使用场景)

### Perplexity API
- **sonar-pro**: 55,000 tokens (保守估计，27,778 × 2)
- **sonar**: 500,000 tokens

### 千问API  
- **qwen-plus**: 600,000 tokens (312,500 × 2，考虑安全余量)
- **qwen-turbo**: 4,000,000 tokens (2,000,000 × 2)
- **qwen-max**: 125,000 tokens (62,500 × 2)

## 注意事项
1. 以上计算基于混合使用场景(50%输入+50%输出)
2. 建议设置比计算值稍低的上限，预留安全余量
3. 实际使用中可根据具体任务类型调整输入输出比例
4. 价格可能会变动，需要定期更新