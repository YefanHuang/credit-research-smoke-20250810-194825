# ä¿¡ç”¨ç ”ç©¶è‡ªåŠ¨åŒ–ç³»ç»Ÿ (é¢å‘å¯¹è±¡ç‰ˆæœ¬)

## ç³»ç»Ÿæ¶æ„

### æ ¸å¿ƒç»„ä»¶

```
CreditResearchSystem (ä¸»ç³»ç»Ÿ)
â”œâ”€â”€ ConfigManager (é…ç½®ç®¡ç†)
â”œâ”€â”€ SearchManager (æœç´¢ç®¡ç†)
â”œâ”€â”€ EmbeddingManager (å‘é‡åŒ–ç®¡ç†)
â”œâ”€â”€ FilterManager (ç­›é€‰ç®¡ç†)
â””â”€â”€ EmailManager (é‚®ä»¶ç®¡ç†)
```

### ç±»å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ConfigManager   â”‚    â”‚ SearchManager   â”‚    â”‚ EmbeddingManagerâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + api_config    â”‚    â”‚ + client        â”‚    â”‚ + client        â”‚
â”‚ + email_config  â”‚    â”‚ + model_name    â”‚    â”‚ + model_name    â”‚
â”‚ + search_config â”‚    â”‚ + search_topic()â”‚    â”‚ + embed_texts() â”‚
â”‚ + filter_config â”‚    â”‚ + search_multipleâ”‚   â”‚ + test_connectionâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ FilterManager   â”‚    â”‚ EmailManager    â”‚    â”‚ CreditResearch  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ + embedding_mgr â”‚    â”‚ + email_user    â”‚    â”‚ + search_mgr    â”‚
â”‚ + llm_client    â”‚    â”‚ + email_pass    â”‚    â”‚ + embedding_mgr â”‚
â”‚ + filter_docs() â”‚    â”‚ + email_to      â”‚    â”‚ + filter_mgr    â”‚
â”‚ + test_componentsâ”‚   â”‚ + send_email()  â”‚    â”‚ + email_mgr     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## åŠŸèƒ½ç‰¹æ€§

### ğŸ” æœç´¢æ¨¡å—
- **Perplexity API** æœç´¢æœ€æ–°ä¿¡ç”¨ç ”ç©¶å†…å®¹
- æ”¯æŒæ—¶é—´è¿‡æ»¤ï¼ˆå‘¨/æœˆ/å¹´ï¼‰
- è‡ªåŠ¨ä¿å­˜æœç´¢ç»“æœ

### ğŸ§  å‘é‡åŒ–æ¨¡å—
- æ”¯æŒ **åƒé—®** å’Œ **DeepSeek** åµŒå…¥æ¨¡å‹
- è‡ªåŠ¨è¯†åˆ«APIå¹³å°
- æ‰¹é‡å‘é‡åŒ–å¤„ç†

### ğŸ” ç­›é€‰æ¨¡å—
- **ChromaDB** å‘é‡ç›¸ä¼¼åº¦ç­›é€‰
- **å¤§æ¨¡å‹** æ™ºèƒ½å†…å®¹åˆ†æ
- å¤šé˜¶æ®µç­›é€‰æµç¨‹

### ğŸ“§ é‚®ä»¶æ¨¡å—
- è‡ªåŠ¨æ ¼å¼åŒ–é‚®ä»¶å†…å®¹
- æ”¯æŒå¤šç§é‚®ä»¶æœåŠ¡å™¨
- æµ‹è¯•é‚®ä»¶åŠŸèƒ½

## ä½¿ç”¨æ–¹æ³•

### 1. ç¯å¢ƒé…ç½®

```bash
# å®‰è£…ä¾èµ–
pip install openai chromadb requests

# è®¾ç½®ç¯å¢ƒå˜é‡
export PERPLEXITY_API_KEY="your_perplexity_key"
export DEEPSEEK_API_KEY="your_deepseek_key"
export QWEN_API_KEY="your_qwen_key"
export EMAIL_USER="your_email@qq.com"
export EMAIL_PASS="your_email_password"
export EMAIL_TO="recipient@example.com"
```

### 2. è¿è¡Œç³»ç»Ÿ

```bash
# è¿›å…¥oopç›®å½•
cd oop

# è¿è¡Œä¸»ç¨‹åº
python main.py
```

### 3. å‘½ä»¤è¡Œç•Œé¢

```
============================================================
        ğŸš€ ä¿¡ç”¨ç ”ç©¶è‡ªåŠ¨åŒ–ç³»ç»Ÿ
        Credit Research Automation System
============================================================

ğŸ“‹ å¯ç”¨åŠŸèƒ½:
1. ç³»ç»ŸçŠ¶æ€æ£€æŸ¥
2. ç³»ç»Ÿç»„ä»¶æµ‹è¯•
3. è¿è¡Œæœç´¢é˜¶æ®µ
4. è¿è¡Œå®Œæ•´å·¥ä½œæµç¨‹
5. å‘é€æµ‹è¯•é‚®ä»¶
6. æŸ¥çœ‹ç³»ç»Ÿä¿¡æ¯
0. é€€å‡ºç³»ç»Ÿ
```

## ç³»ç»Ÿç»„ä»¶è¯¦è§£

### ConfigManager (é…ç½®ç®¡ç†)
```python
# è‡ªåŠ¨ä»ç¯å¢ƒå˜é‡åŠ è½½é…ç½®
config_manager = ConfigManager()
config_manager.print_config_summary()
```

### SearchManager (æœç´¢ç®¡ç†)
```python
# åˆå§‹åŒ–æœç´¢ç®¡ç†å™¨
search_manager = SearchManager(api_key)

# æœç´¢å•ä¸ªä¸»é¢˜
result = search_manager.search_topic("ä¿¡ç”¨è¯„çº§ç ”ç©¶")

# æœç´¢å¤šä¸ªä¸»é¢˜
results = search_manager.search_multiple_topics(topics_list)
```

### EmbeddingManager (å‘é‡åŒ–ç®¡ç†)
```python
# åˆ›å»ºå‘é‡åŒ–ç®¡ç†å™¨
embedding_manager = EmbeddingManager(api_key, platform="auto")

# å‘é‡åŒ–æ–‡æœ¬
embeddings = embedding_manager.embed_texts(texts)

# æµ‹è¯•è¿æ¥
embedding_manager.test_connection()
```

### FilterManager (ç­›é€‰ç®¡ç†)
```python
# åˆå§‹åŒ–ç­›é€‰ç®¡ç†å™¨
filter_manager = FilterManager(embedding_manager, llm_api_key)

# å®Œæ•´ç­›é€‰æµç¨‹
filter_results = filter_manager.filter_documents(search_results)
```

### EmailManager (é‚®ä»¶ç®¡ç†)
```python
# åˆå§‹åŒ–é‚®ä»¶ç®¡ç†å™¨
email_manager = EmailManager(email_config)

# å‘é€ç­›é€‰ç»“æœ
email_manager.send_filter_results(filter_results)
```

## å·¥ä½œæµç¨‹

### å®Œæ•´è‡ªåŠ¨åŒ–æµç¨‹
1. **æœç´¢é˜¶æ®µ**: Perplexity API æœç´¢æœ€æ–°å†…å®¹
2. **å‘é‡åŒ–é˜¶æ®µ**: å°†æœç´¢å†…å®¹è½¬æ¢ä¸ºå‘é‡
3. **ç­›é€‰é˜¶æ®µ**: ChromaDB + å¤§æ¨¡å‹æ™ºèƒ½ç­›é€‰
4. **é‚®ä»¶é˜¶æ®µ**: å‘é€ç²¾é€‰ç»“æœåˆ°æŒ‡å®šé‚®ç®±

### æ•°æ®æµå‘
```
æœç´¢å†…å®¹ â†’ å‘é‡åŒ– â†’ ChromaDBæ¯”å¯¹ â†’ å¤§æ¨¡å‹ç­›é€‰ â†’ é‚®ä»¶æ¨é€
```

## é…ç½®è¯´æ˜

### APIé…ç½®
- `PERPLEXITY_API_KEY`: Perplexityæœç´¢API
- `DEEPSEEK_API_KEY`: DeepSeekå¤§æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹API
- `QWEN_API_KEY`: é€šä¹‰åƒé—®å¤§æ¨¡å‹å’ŒåµŒå…¥æ¨¡å‹API

### é‚®ä»¶é…ç½®
- `EMAIL_USER`: å‘ä»¶é‚®ç®±
- `EMAIL_PASS`: é‚®ç®±å¯†ç /æˆæƒç 
- `EMAIL_TO`: æ”¶ä»¶é‚®ç®±

### æœç´¢é…ç½®
- æœç´¢ä¸»é¢˜: 14ä¸ªé¢„è®¾ä¸»é¢˜
- æ—¶é—´è¿‡æ»¤: é»˜è®¤ä¸€å‘¨å†…
- ç»“æœæ•°é‡: æ¯ä¸ªä¸»é¢˜3ä¸ªç»“æœ

### ç­›é€‰é…ç½®
- å‘é‡ç›¸ä¼¼åº¦ç­›é€‰: å‰5ä¸ªå€™é€‰
- æœ€ç»ˆé€‰æ‹©æ•°é‡: 2ç¯‡æ–‡æ¡£
- å†…å®¹é•¿åº¦é™åˆ¶: 1000å­—ç¬¦

## é”™è¯¯å¤„ç†

### å®¹é”™æœºåˆ¶
- APIè°ƒç”¨å¤±è´¥æ—¶è‡ªåŠ¨é‡è¯•
- å¤§æ¨¡å‹ç­›é€‰å¤±è´¥æ—¶é™çº§åˆ°å‘é‡ç›¸ä¼¼åº¦
- é‚®ä»¶å‘é€å¤±è´¥æ—¶è®°å½•é”™è¯¯

### æ—¥å¿—è®°å½•
- æ‰€æœ‰æ“ä½œéƒ½æœ‰è¯¦ç»†æ—¥å¿—
- é”™è¯¯ä¿¡æ¯åŒ…å«å…·ä½“åŸå› 
- æ”¯æŒè°ƒè¯•æ¨¡å¼

## æ‰©å±•æ€§

### æ·»åŠ æ–°çš„æœç´¢API
```python
class NewSearchManager(SearchManager):
    def __init__(self, api_key):
        # å®ç°æ–°çš„æœç´¢é€»è¾‘
        pass
```

### æ·»åŠ æ–°çš„å¤§æ¨¡å‹
```python
class NewFilterManager(FilterManager):
    def _init_llm_client(self):
        # å®ç°æ–°çš„å¤§æ¨¡å‹å®¢æˆ·ç«¯
        pass
```

### è‡ªå®šä¹‰é‚®ä»¶æ¨¡æ¿
```python
class CustomEmailManager(EmailManager):
    def format_email_content(self, filter_results):
        # è‡ªå®šä¹‰é‚®ä»¶æ ¼å¼
        pass
```

## æ€§èƒ½ä¼˜åŒ–

### æ‰¹å¤„ç†
- å‘é‡åŒ–æ”¯æŒæ‰¹é‡å¤„ç†
- å‡å°‘APIè°ƒç”¨æ¬¡æ•°
- æé«˜å¤„ç†æ•ˆç‡

### ç¼“å­˜æœºåˆ¶
- ChromaDBæœ¬åœ°å‘é‡å­˜å‚¨
- é¿å…é‡å¤å‘é‡åŒ–
- å¿«é€Ÿç›¸ä¼¼åº¦æŸ¥è¯¢

### å¼‚æ­¥å¤„ç†
- æ”¯æŒå¼‚æ­¥APIè°ƒç”¨
- æé«˜å¹¶å‘æ€§èƒ½
- å‡å°‘ç­‰å¾…æ—¶é—´

## å®‰å…¨è€ƒè™‘

### APIå¯†é’¥ç®¡ç†
- ç¯å¢ƒå˜é‡å­˜å‚¨
- ä¸åœ¨ä»£ç ä¸­ç¡¬ç¼–ç 
- æ”¯æŒå¯†é’¥è½®æ¢

### æ•°æ®éšç§
- æœ¬åœ°å‘é‡æ•°æ®åº“
- ä¸æ³„éœ²æ•æ„Ÿä¿¡æ¯
- æ”¯æŒæ•°æ®åŠ å¯†

## ç›‘æ§å’Œç»´æŠ¤

### ç³»ç»Ÿç›‘æ§
- ç»„ä»¶çŠ¶æ€æ£€æŸ¥
- APIè¿æ¥æµ‹è¯•
- æ€§èƒ½æŒ‡æ ‡ç»Ÿè®¡

### æ—¥å¿—ç®¡ç†
- è¯¦ç»†æ“ä½œæ—¥å¿—
- é”™è¯¯è¿½è¸ª
- æ€§èƒ½åˆ†æ

### å¤‡ä»½æ¢å¤
- é…ç½®æ–‡ä»¶å¤‡ä»½
- å‘é‡æ•°æ®åº“å¤‡ä»½
- ç»“æœæ•°æ®å¤‡ä»½ 